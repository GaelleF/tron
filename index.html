<!DOCTYPE html><html><head>
  <title>tron</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAx42QAFP/FABXQkMAQC0uAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAQBEREREREREAFEREREREQQAURERERERBABREREREREEAFEREREREQQAURERERERBABQERAAEREEAFCBEIiREQQAUQgRERERBABRAJEREREEAFAJEREREQQAUJERERERBABRERERERDEAEREREREREQQAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
  <style></style>
  </head><body></body>
  <script type="text/javascript">"use strict";function $s_(t,r,n,e){var o=this;Object.defineProperty($_,""+t,{get:function(){return e||(e=$_(r).then(function(t){return n.apply(o,t)}))}})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$_=function(t){return function(r){return Promise.all(r.map(t))}}(function(t){return $_[t]});$s_(0,[1,2,3],function(t,r,n){var e={exports:{}},o=(e.exports,t),i=r.SIZE,u=r.DIR,a=Math.PI/4,c=function(t){return function(r){return r.slice(0).sort(t)}},s=function(){};c.byScore=c(function(t,r){return t.score-r.score});var f=function(t,r){for(var n=-1,e=void 0;++n<i;)for(e=-1;++e<i;)r=t(n,e,r);return r};Math.random=n.float;var l=Object.freeze({color:"black",name:"empty"}),p=function(t){return t>=i||t<0},d=function(t){return t<i&&t>=0},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return f(function(r,n,e){return(e[r]||(e[r]=Array(i)))[n]=t(r,n),e},Array(i))},x=[],h={players:x,map:[]},v=function(t,r){return Math.abs(t-r)},m=function(t,r){return v(t.x,r.x)+v(t.y,r.y)},g=function(t){console.log("fetching: ",t);var r={name:t,color:"purple",dead:!1,score:0,load:fetch("https://thot.space/"+t+"/tron/raw/master/ai.js?"+Math.random()).then(function(t){return 200===t.status?t.text():Promise.reject(Error("Error: "+t.status+" - "+t.statusText))}).then(function(t){var n=new Function(["SIZE"],t)(i);if("function"!=typeof n)throw Error("ai.js should return a function");try{r.ai=function(t){return n({getPos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,e=void 0===n?0:n,o=t.y,i=void 0===o?0:o;return{x:r.x+e,y:r.y+i}},isFree:function(r){var n=r.x,e=r.y;return d(n)&&d(e)&&t[n][e]===l},getDist:m,reduceMap:f})}}catch(t){return t}}).catch(function(t){console.error("Unable to load player AI",t.message),r.ai=function(){return{}}})};x.push(r)},b=function(t){return t.dead=!0},k=function(){return console.log("game over",c.byScore(x))},j=function(t){return!t.dead};window.players=x;var w=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},_=function(t,r){return Math.atan2(r.y-t.y,r.x-t.x)},E=function(t){return t<10?"0"+t:String(t)},A=function(t){return("        "+t).slice(-8)},S=function t(){var r=Object.create(null),n=h.map[h.map.length-1];x.filter(j).map(function(t){var r=t.ai(n),e=r&&"object"===(void 0===r?"undefined":_typeof(r))?r:w(t,u[r]||{x:0,y:0});e||console.log(t.name,"returned an invalid direction",r);var o=e||{},i=o.x,c=void 0===i?0:i,s=o.y,f=void 0===s?0:s,l={x:c,y:f};if(t.px===l.x&&t.py===f)t.positionList=[];else if(t.px=c,t.py=f,m(l,t)>1){var p=_(t,l);console.log({angle:p,x1:t.x,y1:t.y,x2:l.x,y2:l.y}),l=p>a&&p<=3*a?w(t,u.down):p>3*a&&p<=5*a?w(t,u.left):p>5*a&&p<=7*a?w(t,u.up):w(t,u.right)}return l.player=t,l}).filter(function(t,e,o){var i=t.player,u=t.x,a=t.y;return o.some(function(t){return t.player!==i&&t.x===u&&t.y===a})?i.cause="moved to the same position of another player":p(u)||p(a)?i.cause="went out of bounds":n[u][a]!==l?i.cause="crashed on"+n[u][a].name:(i.x=u,i.y=a,i.score++,(r[u]||(r[u]=Object.create(null)))[a]=i,console.log(A(i.name)+" -> x"+E(u)+" y"+E(a)),!1)}).forEach(function(t){return b(t.player)});var e=y(function(t,e){return void 0!==(r[t]&&r[t][e])?r[t][e]:n[t][e]});h.map.push(e),o.update(x),Object.keys(r).length?requestAnimationFrame(t):k()};window.update=S;var O=function(){return l},$=function(t,r){return r},C=function(t){var r=2*Math.PI/x.length,n=100/x.length/100*360;x.forEach(function(t,e){t.color="hsl("+$(0,e*n)+", 100%, 40%)";var o=Math.round(Math.cos(r*e)*(i/2*.8)+i/2),u=Math.round(Math.sin(r*e)*(i/2*.8)+i/2);t.x=o,t.y=u})};[{id:"321523402227580929",login:"fbertoia"},{id:"332162982731710465",login:"bro"},{id:"149547279886450688",login:"rchoquer"},{id:"320547294296539138",login:"kbennani"},{id:"226375929385975808",login:"adarinot"},{id:"272861842550816768",login:"tgelu"},{id:"226811027046531073",login:"rfautier"},{id:"320775653265899520",login:"mgregoir"}].map(function(t){return g(t.login)});return g("cdenis"),g("xpetit"),g("ycribier"),function(){Promise.all(x.map(function(t){return t.load})).then(function(){var t=y(O);h.map.length=0,h.map.push(t),C(),o.init(t,y,x),S()})}(),e.exports}),$s_(2,[],function(){var t={exports:{}};t.exports;return t.exports={CASE_SIZE:8,SIZE:100,DIR:{up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}}},t.exports}),$s_(3,[],function(){var t={exports:{}},r=(t.exports,2147483648),n=Math.floor(.5*(r-1)),e=function(){return n=(1103515245*n+12345)%r},o=function(){return e()/(r-1)},i=function(t,n){return t+Math.floor(e()/r*n-t)};return t.exports=Object.assign(o,{pick:function(t){return t[i(0,t.length)]},float:o,range:i,int:e}),t.exports}),$s_(1,[2,4],function(t,r){var n={exports:{}},e=(n.exports,t.SIZE),o=t.CASE_SIZE,i=r,u=void 0,a=i.style({height:o+"px",width:o+"px"});Object.assign(document.body.style,{margin:0,background:"darkgrey"});var c=function(t,r){return"translate("+~~(t*o)+"px, "+~~(r*o)+"px)"};return n.exports={init:function(t,r,n){return u=r(function(r,n){return a.style({background:t[n][r].color})}),i.replaceContent(document.body,i.div.style({display:"flex",flexWrap:"wrap",position:"relative",margin:"0 auto",width:o*e+"px"},u.concat(n.map(function(t){var r=t.name,n=t.x,e=t.y;return u[r]=i.div.style({position:"absolute",left:0,top:0,transform:c(n,e),transition:"transform 0.5s",color:"white",fontFamily:"monospace",textShadow:["-1px -1px black","-1px 1px black","1px -1px black","1px 1px black"].join(", m")},r)})))),t},update:function(t){return t.forEach(function(t){var r=t.name,n=t.x,e=t.y,o=t.color,i=u[e][n].style;i.background=o,i.opacity=.5,u[r].style.transform=c(n,e),setTimeout(function(){i.transition="opacity 3s",i.opacity=1},16)})}},n.exports}),$s_(4,[5,6],function(t,r){var n={exports:{}},e=(n.exports,t),o=r;return e.forEach(function(t){return void 0===o[t]&&(o[t]=o(t))}),n.exports=o,n.exports}),$s_(5,[],function(){var t={exports:{}};t.exports;return t.exports=Object.getOwnPropertyNames(window).filter(function(t){return/HTML[A-Z][a-z]+Element/.test(t)}).map(function(t){return t.slice(4,-7).toLowerCase()}).concat("a,abbr,address,article,aside,b,bdi,bdo,blockquote,br,caption,cite,code,col,colgroup,d,data,datalist,dd,del,dfn,dl,dt,element,em,fieldset,figcaption,figure,footer,g,h1,h2,h3,h4,h5,h6,header,hgroup,hr,i,img,ins,ist-style-typ,kbd,li,main,mark,menuitem,nav,noscript,ol,optgroup,p,path,q,rb,rect,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,summary,sup,svg,tbody,td,textarea,tfoot,th,thead,time,tr,u,ul,use,var,wbr".split(",")),t.exports}),$s_(6,[7,8,9,10],function(t,r,n,e){var o={exports:{}},i=(o.exports,t),u=r,a=n.isStr,c=n.isChildren,s=n.isDef,f=e,l=function t(r,n){if(void 0!==n)return n instanceof Element?r.appendChild(n):Array.isArray(n)?n.forEach(function(n){return t(r,n)}):r.appendChild(document.createTextNode(String(n)))},p=function t(r,n){if(!n)return r;for(var e=Object.keys(n),o=-1;++o<e.length;)r[e[o]]&&"object"===_typeof(r[e[o]])?t(r[e[o]],n[e[o]]):r[e[o]]=n[e[o]];return r},d=function(t,r,n){return t.setAttribute(n,r)},y=function(t,r,n){return t[n]=r},x=function(t,r,n){return Object.assign(t[n],r)},h=function(t,r){return t.classList.add.apply(t.classList,r.split(" "))},v=function(t){switch(t){case"class":case"className":return h;case"dataset":case"style":return x;default:return t.indexOf("-")!==-1?d:y}},m=function(t,r,n){c(r)&&(n=r,r=void 0);var e=document.createElement(t.tag);if(r||t.props){var o=i(function(t,r){return s(t)&&v(r)(e,t,r)});t.props&&o(t.props),r&&o(r)}return l(e,n),e},g=function(t,r){return a(t)?(r||(r={}),t=f(t,r).toLowerCase()):(r=t,t="div"),Object.keys(r).length||(r=void 0),{tag:t,props:r}},b=function(t,r){return a(t)?g(t,{style:r.style||r}):g("div",{style:t.style||t})},k=function(t,r){return j(p(t,t))},j=function(t){var r=function(r,n){return m(t,r,n)};return r.style=function(r,n){return m(t,{style:r},n)},r.extend=function(r,n){return k(t,Array.isArray(r)?r.reduce(p):g(r,n))},r.extend.style=function(r,n){return k(t,Array.isArray(r)?r.reduce(p):b(r,n))},r},w=function(t,r){return j(g(t,r))};w.style=function(t,r){return j(b(t,r))},w.appendChild=u(l);var _=w.empty=function(t){if(t)for(;t.lastChild&&t.lastChild!==t;)t.removeChild(t.lastChild)};return w.replaceContent=u(function(t,r){_(t),l(t,r)}),w.getHandler=v,o.exports=w,o.exports}),$s_(8,[],function(){var t={exports:{}},r=(t.exports,function(t,r){var n=t.length,e=n+r.length;if(n===e)return t;var o=Object.create(null);o.length=e;for(var i=-1;++i<n;)o[i]=t[i];for(;i<e;)o[i]=r[i-n],++i;return o});return t.exports=function(t,n){function e(o){return o.length<n?function(){return e(r(o,arguments))}:t.apply(null,o)}return n||(n=t.length),function(){return e(arguments)}},t.exports.mergeArgs=r,t.exports}),$s_(9,[],function(){var t={exports:{}},r=(t.exports,function(t){return"function"==typeof t}),n=Array.isArray||function(t){return t&&t.constructor===Array},e=function(t){return void 0!==t},o=function(t){return"number"==typeof t&&!isNaN(t)},i=function(t){return t===!0||t===!1},u=function(t){return t&&"object"===(void 0===t?"undefined":_typeof(t))},a=function(t){return"string"==typeof t},c=function(t){return void 0===t},s=function(t){return t&&r(t.then)},f=function(t){return s(t)&&r(t.catch)},l=function(t){return t instanceof Element},p=function(t){return a(t)||n(t)||l(t)},d=function(t){return r(t)&&r(t.set)},y=function(t){return r(t.listen)&&r(t.broadcast)},x=function(t){switch(void 0===t?"undefined":_typeof(t)){case"string":case"number":case"boolean":return!0;default:return!1}},h="undefined"!=typeof window,v=function(t){return o(t)&&Math.floor(t)!==t},m=Number.isInteger||function(t){return o(t)&&Math.floor(t)===t},g={isFn:r,isArr:n,isDef:e,isInt:m,isStr:a,isObj:u,isNum:o,isBool:i,isNode:h,isUndef:c,isFloat:v,isEvent:y,isObserv:d,isPromise:f,isElement:l,isChildren:p,isPrimitive:x,isThenable:s};return Object.keys(g).forEach(function(t){return g[t.slice(2).toLowerCase()]=g[t]}),t.exports=g,t.exports}),$s_(7,[11],function(t){var r={exports:{}},n=(r.exports,t);return r.exports=n.magic(),r.exports}),$s_(10,[12],function(t){var r={exports:{}},n=(r.exports,t),e=n(/^\.|#/);return r.exports=function(t,r){if(!t)return"div";var n=t.split(/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/),o=void 0;e(n[1])&&(o="div");var i=void 0,u=void 0,a=void 0,c=void 0;for(c=0;c<n.length;c++)(u=n[c])&&(a=u[0],o?"."===a?(i||(i=[])).push(u.slice(1)):"#"===a&&(r.id||(r.id=u.slice(1))):o=u);return i&&(r.className&&i.push(r.className),r.className=i.join(" ")),r.namespace,o},r.exports}),$s_(12,[],function(){var t={exports:{}};t.exports;return t.exports=function(t){return t.test.bind(t)},t.exports}),$s_(11,[9,13],function(t,r){var n={exports:{}},e=(n.exports,t.isInt),o=(t.isFn,t.isObj,t.isStr,r),i=function(t,r,n,o){return n?e(n.length)?t.arr(r,n,o):t.obj(r,n,o):n},u=function(t){return function(){var r=arguments;switch(arguments.length){case 1:return function(){return t(r[0])};case 2:return t(arguments[0],arguments[1]);case 3:return t(arguments[0],arguments[1],arguments[2])}}},a=function(t){var r=function(){var r=arguments;switch(arguments.length){case 1:return function(n,e){return i(t,r[0],n,e)};case 2:return i(t,arguments[0],arguments[1]);case 3:return i(t,arguments[0],arguments[1],arguments[2])}};return r.arr=u(t.arr),r.obj=u(t.obj),r};a.magic=function(t,r){return a({obj:o("obj",t,r),arr:o("arr",t,r)})};var c=a.magic({args:["src","collection"],pre:"//",post:"\nif (src[key] !== collection[key]) return false",nok:!0});return a.eql=c,a.currify=u,n.exports=a,n.exports}),$s_(13,[9],function(t){var r={exports:{}},n=(r.exports,t),e={obj:"Object.create(null)",arr:"Array(max)"},o={obj:"collection[keys[++i]]",arr:"collection[++key]"},i={obj:"++i < max",arr:"++key < max"},u={obj:"key = keys[i]",arr:""},a={obj:["var keys = Object.keys(collection)","var max = keys.length","var i = -1, key\n"].join(";"),arr:["var max = collection.length","var key = -1"].join(";")};return r.exports=function(t,r,c){n.obj(r)?(c=r,c.acc?r="accumulator":r.result&&(r="result")):c||(c={});var s=n.arr(c.args)?c.args:["fn","collection"],f=a[t],l="",p=n.def(c.nok)?c.nok:"collection",d=(u[t],c.post||""),y=c.pre||"";switch(r){case"accumulator":s.push("acc"),l+="acc, ",f+=";acc || (acc = "+(c.acc||o[t])+")",y||(y="acc = "),p="acc";break;case"result":f+=";var result = "+(c.result||e[t]),y||(y="result[key] = "),p="result";break;default:var x=!!n.def(c.test)&&c.test;if(Boolean(x)){y||(y=x?"if (":"if (!"),d||(d=") return "+(n.def(c.ok)?c.ok:p));break}y||(y="if ("),d||(d="=== "+x+") return "+(n.def(c.ok)?c.ok:p))}return Function(s,[f+";","while ("+i[t]+") {","  "+u[t],"  "+y+"fn("+l+"collection[key], key, collection)"+d,"} return "+p].join("\n"))},r.exports}),$_[0];</script>
  </html>