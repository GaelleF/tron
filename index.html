<!DOCTYPE html><html><head>
  <title>tron</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAx42QAFP/FABXQkMAQC0uAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAQBEREREREREAFEREREREQQAURERERERBABREREREREEAFEREREREQQAURERERERBABQERAAEREEAFCBEIiREQQAUQgRERERBABRAJEREREEAFAJEREREQQAUJERERERBABRERERERDEAEREREREREQQAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
  <style></style>
  </head><body></body>
  <script type="text/javascript">"use strict";function $s_(r,t,n,e){var o=this;Object.defineProperty($_,""+r,{get:function(){return e||(e=$_(t).then(function(r){return n.apply(o,r)}))}})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$_=function(r){return function(t){return Promise.all(t.map(r))}}(function(r){return $_[r]});$s_(0,[1,2,3,4,5,6,7],function(r,t,n,e,o,i,u){var a={exports:{}},c=(a.exports,r),s=t,f=n,l=e.shuffle,p=o.js,d=i,y=u.SIZE,x=u.DIR,h=Math.PI/4,m=function(r){return function(t){return t.slice(0).sort(r)}},v=function(){};m.byScore=m(function(r,t){return r.score-t.score});var g=function(r){for(var t=arguments.length,n=Array(t>1?t-1:0),e=1;e<t;e++)n[e-1]=arguments[e];try{return r.apply(void 0,n)}catch(r){return r}},b=function(r,t){for(var n=-1,e=void 0;++n<y;)for(e=-1;++e<y;)t=r(n,e,t);return t};Math.random=f.float,f.seed(d.seed);var j=Object.freeze({color:"black",name:"empty"}),k=function(r){return r>=y||r<0},w=function(r){return r<y&&r>=0},E=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return b(function(t,n,e){return(e[t]||(e[t]=Array(y)))[n]=r(t,n),e},Array(y))},_=[],A=Object.create(null),M={players:_,map:[]},O=function(r,t){return Math.abs(r-t)},$=function(r,t){return O(r.x,t.x)+O(r.y,t.y)},I=function(r){return r.name},S=function(){return _.map(I)},C=function(){return _.map(function(r){return{name:r.name,dead:r.dead,score:r.score,x:r.x,y:r.y}})},P=function(r){console.log("fetching: ",r);var t=r;if(A[r]){var n=new RegExp("^"+r+"(d+)?"),e=S().filter(function(r){return n.test(r)}).length;t=""+r+(e>0?e+1:"")}var o=A[t]={name:t,color:"purple",dead:!1,score:0,load:fetch("https://thot.space/"+r+"/tron/raw/master/ai.js?"+Math.random()).then(function(r){return 200===r.status?r.text():Promise.reject(Error("Error: "+r.status+" - "+r.statusText))}).then(function(r){var t=new Function(["SIZE"],r)(y);if("function"!=typeof t)throw Error("ai.js should return a function");try{o.ai=function(r){return t({getPos:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.x,n=void 0===t?0:t,e=r.y,i=void 0===e?0:e;return{x:o.x+n,y:o.y+i}},isFree:function(t){var n=t.x,e=t.y;return w(n)&&w(e)&&r[n][e]===j},getDist:$,reduceMap:b,players:C(),reduceMapCheck:function(t){return b(function(n,e,o){return t(n,e,r[n][e]===j,o)})}})}}catch(r){return r}}).catch(function(r){console.error("Unable to load player AI",r.stack),o.ai=function(){return{}}})};_.push(o)},F=function(r){console.log(r.name+" died because he "+r.cause+" at "+r.x+" "+r.y),r.dead=!0,c.setScore(_)},N=function(){c.end(),console.log("game over",m.byScore(_))},L=function(r){return!r.dead};window.players=_;var R=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},Z=function(r,t){return Math.atan2(t.y-r.y,t.x-r.x)},q=function r(){var t=Object.create(null),n=M.map[M.map.length-1];_.filter(L).map(function(r){var t=g(r.ai,n);if(t instanceof Error)return{error:t,player:r};var e=t&&"object"===(void 0===t?"undefined":_typeof(t))?t:R(r,x[t]||{x:0,y:0});e||console.log(r.name,"returned an invalid direction",t);var o=e||{},i=o.x,u=void 0===i?0:i,a=o.y,c=void 0===a?0:a,s={x:u,y:c};if(r.px===s.x&&r.py===c)r.positionList=[];else if(r.px=u,r.py=c,$(s,r)>1){var f=Z(r,s);console.log({angle:f,x1:r.x,y1:r.y,x2:s.x,y2:s.y}),s=f>h&&f<=3*h?R(r,x.down):f>3*h&&f<=5*h?R(r,x.left):f>5*h&&f<=7*h?R(r,x.up):R(r,x.right)}return s.player=r,s}).filter(function(r,e,o){var i=r.player,u=r.x,a=r.y,c=r.error;return c?(console.error(c),i.cause="AI error: "+c.message):o.some(function(r){return r.player!==i&&r.x===u&&r.y===a})?i.cause="moved to the same position of another player":k(u)||k(a)?i.cause="went out of bounds":n[u][a]!==j?i.cause="crashed on"+n[u][a].name:(i.x=u,i.y=a,i.score++,(t[u]||(t[u]=Object.create(null)))[a]=i,!1)}).forEach(function(r){return F(r.player)});var e=E(function(r,e){return void 0!==(t[r]&&t[r][e])?t[r][e]:n[r][e]});M.map.push(e),c.update(_),Object.keys(t).length?setTimeout(function(){return requestAnimationFrame(r)},0):N()};window.update=q;var D=function(){return j},T=function(r){return function(t){return t>r?U(t-r):t}},U=T(1),z=T(2*Math.PI),B=function(r){var t=2*Math.PI/_.length,n=100/_.length/100,e=t*Math.random();_.forEach(function(r,o){r.color=s(U(o*n+.25),1,.4);var i=Math.round(z(Math.cos(t*o+e))*(y/2*.8)+y/2),u=Math.round(z(Math.sin(t*o+e))*(y/2*.8)+y/2);r.x=i,r.y=u})};return l(d.users.sort()).forEach(P),function(){Promise.all(_.map(function(r){return r.load}).concat([p("https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js")])).then(function(){var r=E(D);M.map.length=0,M.map.push(r),B(),c.init(r,E,_),q()})}(),a.exports}),$s_(2,[],function(){var r={exports:{}},t=(r.exports,function(r,t,n){return r<<16|t<<8|n}),n=function(r){return Math.round(255*r)},e=function(r,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+6*(t-r)*n:n<.5?t:n<2/3?r+(t-r)*(2/3-n)*6:r},o=function(r,o,i){if(!o)return t(n(i),n(i),n(i));var u=i<.5?i*(1+o):i+o-i*o,a=2*i-u,c=e(a,u,r+1/3),s=e(a,u,r),f=e(a,u,r-1/3);return console.log({r:c,g:s,b:f}),t(n(c),n(s),n(f))};return r.exports=o,r.exports}),$s_(3,[],function(){var r={exports:{}},t=(r.exports,Math.random()),n=2147483648,e=Math.floor(t*(n-1)),o=function(){return e=(1103515245*e+12345)%n},i=function(){return o()/(n-1)},u=function(r,t){return r+Math.floor(o()/n*t-r)};return r.exports=Object.assign(i,{seed:function(r){return e=Math.floor((r||t)*(n-1)),r?r:t},pick:function(r){return r[u(0,r.length)]},float:i,range:u,int:o}),r.exports}),$s_(4,[],function(){var r={exports:{}},t=(r.exports,function(r,t){void 0===t&&(t=r,r=0);for(var n=t-r,e=Array(n),o=-1;++o<=n;)e[o]=r++;return e});return t.from=function(r){return function(n){return t(r,n)}},r.exports={range:t,remove:function(r,t){if(r){var n=r.indexOf(t);n<0||r.splice(n,1)}},n:function(r){return function(t){return t[r]}},shuffle:function(r){for(var t=r.length,n=void 0,e=void 0;--t>0;)n=Math.floor(Math.random()*(t+1)),e=r[n],r[n]=r[t],r[t]=e;return r},first:function(r){return r[0]},append:function(r,t){return r?(r.push(t),r):[t]},prepend:function(r,t){return r?(r.unshift(t),r):[t]},last:function(r){return r[r.length-1]},unique:function(r){return Array.from(new Set(r))},random:function(r){return r[Math.floor(Math.random()*r.length)]},inRange:function(r,t){return Math.min(Math.max(t,0),r.length-1)}},Object.getOwnPropertyNames(Array.prototype).filter(function(r){return"function"==typeof Array.prototype[r]}).forEach(function(t){var n=Array.prototype[t];r.exports[t]=function(){var r=arguments;return function(t){return n.apply(t,r)}}}),r.exports}),$s_(7,[],function(){var r={exports:{}};r.exports;return r.exports={CASE_SIZE:8,SIZE:100,DIR:{up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}}},r.exports}),$s_(1,[7,8],function(r,t){var n={exports:{}},e=(n.exports,r.SIZE),o=r.CASE_SIZE,i=t,u=Object.create(null),a=void 0,c=void 0;i.style({height:o+"px",width:o+"px"});Object.assign(document.body.style,{margin:0,background:"darkgrey"});var s=function(r,t){return"translate("+~~(r*o)+"px, "+~~(t*o)+"px)"},f=[],l=function(r){return(" #"+r).slice(-3)},p=function(r){return(r+"        ").slice(0,10)},d=function(r,t,n){return l(t.length-(n-(r+1)))},y=function(r){return r.alpha<=1},x=function(r){return r.alpha+=.0075},h=function(){f=f.filter(y),f.forEach(x)};return n.exports={init:function(r,t,n){return c=PIXI.autoDetectRenderer(o*e,o*e),a=new PIXI.Container,i.replaceContent(document.body,i.div.style({display:"flex",flexWrap:"wrap",position:"relative",margin:"0 auto",width:o*e+"px"},n.map(function(r){var t=r.name,n=r.x,e=r.y;r.color;return u[t]=i.div.style({position:"absolute",left:0,top:0,transform:s(n,e),transition:"transform 0.1s",whiteSpace:"pre",color:"white",opacity:1,padding:"2px",background:"rgba(0, 0, 0, 0.25)",fontFamily:"monospace",textShadow:["-1px -1px black","-1px 1px black","1px -1px black","1px 1px black"].join(", m")},t)}).concat([c.view]))),c.render(a),r},setScore:function(r){return r.filter(function(r){return r.dead}).sort(function(r,t){return t.score===r.score?r.name-t.name:t.score-r.score}).forEach(function(t,n,e){var o=t.name,i=(t.x,t.y,t.cause,t.score),a=t.color,c=e.length,f=u[o];f.textContent=d(n,r,c)+" - "+p(o)+" ("+i+")",f.style.position="fixed",f.style.color="#"+("00000"+a.toString(16)).slice(-6),f.style.background="black",f.style.transition="transform 0.5s ease-in, opacity 5s ease-out",f.style.transform=s(0,2*n)})},update:function(r){r.forEach(function(r){var t=r.name,n=r.x,e=r.y,i=r.color,c=r.dead,l=new PIXI.Graphics;l.beginFill(i),l.alpha=.3,l.drawRect(n*o,e*o,o,o),l.endFill(),a.addChild(l),f.push(l),c||(u[t].style.transform=s(n,e))}),h(),c.render(a)},end:function(){setInterval(function(){h(),c.render(a)},16)}},n.exports}),$s_(5,[9],function(r){var t={exports:{}},n=(t.exports,r),e=function(r,t,e,o){var i=n(function(t,n){return t&&n[r].indexOf(t)===-1&&t}),u=function(r){return i(document.body.getElementsByTagName(t),r)},a=function(r,t){return function(n){var e=new Error("Error loading "+o+" "+r);e.event=n,t(e)}};return function(n){if(!u(n))return Promise.reject(new Error(o+" "+n+" already injected"));var i=document.createElement(t),c=new Promise(function(r,t){i.onerror=a(n,t),i.onload=r});return i[e]=o,i[r]=n,document.body.appendChild(i),c}};return t.exports={css:e("href","link","rel","stylesheet"),js:e("src","script","type","text/javascript")},t.exports}),$s_(6,[10],function(r){var t={exports:{}},n=(t.exports,r),e={seed:Math.random(),users:["fbertoia","bro","rchoquer","kbennani","tgelu","adarinot","xpetit","mgregoir","rfautier","ycribier","cdenis"]},o=n(),i=t.exports={seed:o.seed?Number(o.seed):e.seed,users:o.users?o.users.split(","):e.users};return window.location.hash="?users="+i.users.join()+"&seed="+i.seed,window.addEventListener("hashchange",function(){window.location.reload(1)}),t.exports}),$s_(10,[9],function(r){var t={exports:{}},n=(t.exports,r),e=n(function(r,t){var n=t.replace(/\+/g," "),e=n.indexOf("="),o=decodeURIComponent(n.slice(0,e)),i=decodeURIComponent(n.slice(e+1));return void 0===r[o]?r[o]=i:Array.isArray(r[o])?r[o].push(i):r[o]=[r[o],i],r});return t.exports=function(r){return r||(r=(location.hash||location.search||"").split("?")[1]),r&&"string"==typeof r?e(r.split("&"),Object.create(null)):{}},t.exports}),$s_(8,[11,12],function(r,t){var n={exports:{}},e=(n.exports,r),o=t;return e.forEach(function(r){return void 0===o[r]&&(o[r]=o(r))}),n.exports=o,n.exports}),$s_(9,[13,14],function(r,t){var n={exports:{}},e=(n.exports,r),o=t.isFn;return n.exports=e.magic("accumulator"),n.exports.from=function(r,t){return o(t)?function(n){return reduce(r,n,t())}:function(n){return reduce(r,n,t)}},n.exports}),$s_(11,[],function(){var r={exports:{}};r.exports;return r.exports=Object.getOwnPropertyNames(window).filter(function(r){return/HTML[A-Z][a-z]+Element/.test(r)}).map(function(r){return r.slice(4,-7).toLowerCase()}).concat("a,abbr,address,article,aside,b,bdi,bdo,blockquote,br,caption,cite,code,col,colgroup,d,data,datalist,dd,del,dfn,dl,dt,element,em,fieldset,figcaption,figure,footer,g,h1,h2,h3,h4,h5,h6,header,hgroup,hr,i,img,ins,ist-style-typ,kbd,li,main,mark,menuitem,nav,noscript,ol,optgroup,p,path,q,rb,rect,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,summary,sup,svg,tbody,td,textarea,tfoot,th,thead,time,tr,u,ul,use,var,wbr".split(",")),r.exports}),$s_(14,[],function(){var r={exports:{}},t=(r.exports,function(r){return"function"==typeof r}),n=Array.isArray||function(r){return r&&r.constructor===Array},e=function(r){return void 0!==r},o=function(r){return"number"==typeof r&&!isNaN(r)},i=function(r){return r===!0||r===!1},u=function(r){return r&&"object"===(void 0===r?"undefined":_typeof(r))},a=function(r){return"string"==typeof r},c=function(r){return void 0===r},s=function(r){return r&&t(r.then)},f=function(r){return s(r)&&t(r.catch)},l=function(r){return r instanceof Element},p=function(r){return a(r)||n(r)||l(r)},d=function(r){return t(r)&&t(r.set)},y=function(r){return t(r.listen)&&t(r.broadcast)},x=function(r){switch(void 0===r?"undefined":_typeof(r)){case"string":case"number":case"boolean":return!0;default:return!1}},h="undefined"!=typeof window,m=function(r){return o(r)&&Math.floor(r)!==r},v=Number.isInteger||function(r){return o(r)&&Math.floor(r)===r},g={isFn:t,isArr:n,isDef:e,isInt:v,isStr:a,isObj:u,isNum:o,isBool:i,isNode:h,isUndef:c,isFloat:m,isEvent:y,isObserv:d,isPromise:f,isElement:l,isChildren:p,isPrimitive:x,isThenable:s};return Object.keys(g).forEach(function(r){return g[r.slice(2).toLowerCase()]=g[r]}),r.exports=g,r.exports}),$s_(12,[14,15,16,17],function(r,t,n,e){var o={exports:{}},i=(o.exports,t),u=n,a=r.isStr,c=r.isChildren,s=r.isDef,f=e,l=function r(t,n){if(void 0!==n)return n instanceof Element?t.appendChild(n):Array.isArray(n)?n.forEach(function(n){return r(t,n)}):t.appendChild(document.createTextNode(String(n)))},p=function r(t,n){if(!n)return t;for(var e=Object.keys(n),o=-1;++o<e.length;)t[e[o]]&&"object"===_typeof(t[e[o]])?r(t[e[o]],n[e[o]]):t[e[o]]=n[e[o]];return t},d=function(r,t,n){return r.setAttribute(n,t)},y=function(r,t,n){return r[n]=t},x=function(r,t,n){return Object.assign(r[n],t)},h=function(r,t){return r.classList.add.apply(r.classList,t.split(" "))},m=function(r){switch(r){case"class":case"className":return h;case"dataset":case"style":return x;default:return r.indexOf("-")!==-1?d:y}},v=function(r,t,n){c(t)&&(n=t,t=void 0);var e=document.createElement(r.tag);if(t||r.props){var o=i(function(r,t){return s(r)&&m(t)(e,r,t)});r.props&&o(r.props),t&&o(t)}return l(e,n),e},g=function(r,t){return a(r)?(t||(t={}),r=f(r,t).toLowerCase()):(t=r,r="div"),Object.keys(t).length||(t=void 0),{tag:r,props:t}},b=function(r,t){return a(r)?g(r,{style:t.style||t}):g("div",{style:r.style||r})},j=function(r,t){return k(p(r,r))},k=function(r){var t=function(t,n){return v(r,t,n)};return t.style=function(t,n){return v(r,{style:t},n)},t.extend=function(t,n){return j(r,Array.isArray(t)?t.reduce(p):g(t,n))},t.extend.style=function(t,n){return j(r,Array.isArray(t)?t.reduce(p):b(t,n))},t},w=function(r,t){return k(g(r,t))};w.style=function(r,t){return k(b(r,t))},w.appendChild=u(l);var E=w.empty=function(r){if(r)for(;r.lastChild&&r.lastChild!==r;)r.removeChild(r.lastChild)};return w.replaceContent=u(function(r,t){E(r),l(r,t)}),w.getHandler=m,o.exports=w,o.exports}),$s_(13,[14,18],function(r,t){var n={exports:{}},e=(n.exports,r.isInt),o=(r.isFn,r.isObj,r.isStr,t),i=function(r,t,n,o){return n?e(n.length)?r.arr(t,n,o):r.obj(t,n,o):n},u=function(r){return function(){var t=arguments;switch(arguments.length){case 1:return function(){return r(t[0])};case 2:return r(arguments[0],arguments[1]);case 3:return r(arguments[0],arguments[1],arguments[2])}}},a=function(r){var t=function(){var t=arguments;switch(arguments.length){case 1:return function(n,e){return i(r,t[0],n,e)};case 2:return i(r,arguments[0],arguments[1]);case 3:return i(r,arguments[0],arguments[1],arguments[2])}};return t.arr=u(r.arr),t.obj=u(r.obj),t};a.magic=function(r,t){return a({obj:o("obj",r,t),arr:o("arr",r,t)})};var c=a.magic({args:["src","collection"],pre:"//",post:"\nif (src[key] !== collection[key]) return false",nok:!0});return a.eql=c,a.currify=u,n.exports=a,n.exports}),$s_(15,[13],function(r){var t={exports:{}},n=(t.exports,r);return t.exports=n.magic(),t.exports}),$s_(16,[],function(){var r={exports:{}},t=(r.exports,function(r,t){var n=r.length,e=n+t.length;if(n===e)return r;var o=Object.create(null);o.length=e;for(var i=-1;++i<n;)o[i]=r[i];for(;i<e;)o[i]=t[i-n],++i;return o});return r.exports=function(r,n){function e(o){return o.length<n?function(){return e(t(o,arguments))}:r.apply(null,o)}return n||(n=r.length),function(){return e(arguments)}},r.exports.mergeArgs=t,r.exports}),$s_(18,[14],function(r){var t={exports:{}},n=(t.exports,r),e={obj:"Object.create(null)",arr:"Array(max)"},o={obj:"collection[keys[++i]]",arr:"collection[++key]"},i={obj:"++i < max",arr:"++key < max"},u={obj:"key = keys[i]",arr:""},a={obj:["var keys = Object.keys(collection)","var max = keys.length","var i = -1, key\n"].join(";"),arr:["var max = collection.length","var key = -1"].join(";")};return t.exports=function(r,t,c){n.obj(t)?(c=t,c.acc?t="accumulator":t.result&&(t="result")):c||(c={});var s=n.arr(c.args)?c.args:["fn","collection"],f=a[r],l="",p=n.def(c.nok)?c.nok:"collection",d=(u[r],c.post||""),y=c.pre||"";switch(t){case"accumulator":s.push("acc"),l+="acc, ",f+=";acc || (acc = "+(c.acc||o[r])+")",y||(y="acc = "),p="acc";break;case"result":f+=";var result = "+(c.result||e[r]),y||(y="result[key] = "),p="result";break;default:var x=!!n.def(c.test)&&c.test;if(Boolean(x)){y||(y=x?"if (":"if (!"),d||(d=") return "+(n.def(c.ok)?c.ok:p));break}y||(y="if ("),d||(d="=== "+x+") return "+(n.def(c.ok)?c.ok:p))}return Function(s,[f+";","while ("+i[r]+") {","  "+u[r],"  "+y+"fn("+l+"collection[key], key, collection)"+d,"} return "+p].join("\n"))},t.exports}),$s_(17,[19],function(r){var t={exports:{}},n=(t.exports,r),e=n(/^\.|#/);return t.exports=function(r,t){if(!r)return"div";var n=r.split(/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/),o=void 0;e(n[1])&&(o="div");var i=void 0,u=void 0,a=void 0,c=void 0;for(c=0;c<n.length;c++)(u=n[c])&&(a=u[0],o?"."===a?(i||(i=[])).push(u.slice(1)):"#"===a&&(t.id||(t.id=u.slice(1))):o=u);return i&&(t.className&&i.push(t.className),t.className=i.join(" ")),t.namespace,o},t.exports}),$s_(19,[],function(){var r={exports:{}};r.exports;return r.exports=function(r){return r.test.bind(r)},r.exports}),$_[0];</script>
  </html>