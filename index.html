<!DOCTYPE html><html><head>
  <title>tron</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAx42QAFP/FABXQkMAQC0uAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAQBEREREREREAFEREREREQQAURERERERBABREREREREEAFEREREREQQAURERERERBABQERAAEREEAFCBEIiREQQAUQgRERERBABRAJEREREEAFAJEREREQQAUJERERERBABRERERERDEAEREREREREQQAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
  <style></style>
  </head><body></body>
  <script type="text/javascript">"use strict";function $s_(r,t,e,n){var o=this;Object.defineProperty($_,""+r,{get:function(){return n||(n=$_(t).then(function(r){return e.apply(o,r)}))}})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$_=function(r){return function(t){return Promise.all(t.map(r))}}(function(r){return $_[r]});$s_(0,[1,2,3,4,5,6,7],function(r,t,e,n,o,u,i){var a={exports:{}},c=(a.exports,r),s=t,f=e,l=n.shuffle,p=o.js,d=u,y=i.SIZE,x=i.DIR,h=Math.PI/4,v=function(r){return function(t){return t.slice(0).sort(r)}},m=function(){};v.byScore=v(function(r,t){return r.score-t.score});var g=function(r){for(var t=arguments.length,e=Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];try{return r.apply(void 0,e)}catch(r){return r}},b=function(r,t){for(var e=-1,n=void 0;++e<y;)for(n=-1;++n<y;)t=r(e,n,t);return t};Math.random=f.float,f.seed(d.seed);var j=Object.freeze({color:"black",name:"empty"}),k=function(r){return r>=y||r<0},w=function(r){return r<y&&r>=0},_=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return b(function(t,e,n){return(n[t]||(n[t]=Array(y)))[e]=r(t,e),n},Array(y))},E=[],A={players:E,map:[]},O=function(r,t){return Math.abs(r-t)},M=function(r,t){return O(r.x,t.x)+O(r.y,t.y)},$=function(r){console.log("fetching: ",r);var t={name:r,color:"purple",dead:!1,score:0,load:fetch("https://thot.space/"+r+"/tron/raw/master/ai.js?"+Math.random()).then(function(r){return 200===r.status?r.text():Promise.reject(Error("Error: "+r.status+" - "+r.statusText))}).then(function(r){var e=new Function(["SIZE"],r)(y);if("function"!=typeof e)throw Error("ai.js should return a function");try{t.ai=function(r){return e({getPos:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.x,n=void 0===e?0:e,o=r.y,u=void 0===o?0:o;return{x:t.x+n,y:t.y+u}},isFree:function(t){var e=t.x,n=t.y;return w(e)&&w(n)&&r[e][n]===j},getDist:M,reduceMap:b})}}catch(r){return r}}).catch(function(r){console.error("Unable to load player AI",r.message),t.ai=function(){return{}}})};E.push(t)},S=function(r){console.log(r.name+" died because he "+r.cause+" at "+r.x+" "+r.y),r.dead=!0,c.setScore(E)},I=function(){c.end(),console.log("game over",v.byScore(E))},C=function(r){return!r.dead};window.players=E;var F=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},P=function(r,t){return Math.atan2(t.y-r.y,t.x-r.x)},N=function r(){var t=Object.create(null),e=A.map[A.map.length-1];E.filter(C).map(function(r){var t=g(r.ai,e);if(t instanceof Error)return{error:t,player:r};var n=t&&"object"===(void 0===t?"undefined":_typeof(t))?t:F(r,x[t]||{x:0,y:0});n||console.log(r.name,"returned an invalid direction",t);var o=n||{},u=o.x,i=void 0===u?0:u,a=o.y,c=void 0===a?0:a,s={x:i,y:c};if(r.px===s.x&&r.py===c)r.positionList=[];else if(r.px=i,r.py=c,M(s,r)>1){var f=P(r,s);console.log({angle:f,x1:r.x,y1:r.y,x2:s.x,y2:s.y}),s=f>h&&f<=3*h?F(r,x.down):f>3*h&&f<=5*h?F(r,x.left):f>5*h&&f<=7*h?F(r,x.up):F(r,x.right)}return s.player=r,s}).filter(function(r,n,o){var u=r.player,i=r.x,a=r.y,c=r.error;if(c)return console.error(c),u.cause="AI error: "+c.message;return o.some(function(r){return r.player!==u&&r.x===i&&r.y===a})?u.cause="moved to the same position of another player":k(i)||k(a)?u.cause="went out of bounds":e[i][a]!==j?u.cause="crashed on"+e[i][a].name:(u.x=i,u.y=a,u.score++,(t[i]||(t[i]=Object.create(null)))[a]=u,!1)}).forEach(function(r){return S(r.player)});var n=_(function(r,n){return void 0!==(t[r]&&t[r][n])?t[r][n]:e[r][n]});A.map.push(n),c.update(E),Object.keys(t).length?setTimeout(function(){return requestAnimationFrame(r)},0):I()};window.update=N;var Z=function(){return j},L=function(r){var t=2*Math.PI/E.length,e=100/E.length/100;E.forEach(function(r,n){r.color=s(n*e,1,.4);var o=Math.round(Math.cos(t*n)*(y/2*.8)+y/2),u=Math.round(Math.sin(t*n)*(y/2*.8)+y/2);r.x=o,r.y=u})};return l(d.users.sort()).forEach($),function(){Promise.all(E.map(function(r){return r.load}).concat([p("https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js")])).then(function(){var r=_(Z);A.map.length=0,A.map.push(r),L(),c.init(r,_,E),N()})}(),a.exports}),$s_(2,[],function(){var r={exports:{}},t=(r.exports,function(r,t,e){return r<<16|t<<8|e}),e=function(r){return Math.round(255*r)},n=function(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+6*(t-r)*e:e<.5?t:e<2/3?r+(t-r)*(2/3-e)*6:r},o=function(r,o,u){if(!o)return t(e(u),e(u),e(u));var i=u<.5?u*(1+o):u+o-u*o,a=2*u-i,c=n(a,i,r+1/3),s=n(a,i,r),f=n(a,i,r-1/3);return console.log({r:c,g:s,b:f}),t(e(c),e(s),e(f))};return r.exports=o,r.exports}),$s_(3,[],function(){var r={exports:{}},t=(r.exports,Math.random()),e=2147483648,n=Math.floor(t*(e-1)),o=function(){return n=(1103515245*n+12345)%e},u=function(){return o()/(e-1)},i=function(r,t){return r+Math.floor(o()/e*t-r)};return r.exports=Object.assign(u,{seed:function(r){return n=Math.floor((r||t)*(e-1)),r?r:t},pick:function(r){return r[i(0,r.length)]},float:u,range:i,int:o}),r.exports}),$s_(4,[],function(){var r={exports:{}},t=(r.exports,function(r,t){void 0===t&&(t=r,r=0);for(var e=t-r,n=Array(e),o=-1;++o<=e;)n[o]=r++;return n});return t.from=function(r){return function(e){return t(r,e)}},r.exports={range:t,remove:function(r,t){if(r){var e=r.indexOf(t);e<0||r.splice(e,1)}},n:function(r){return function(t){return t[r]}},shuffle:function(r){for(var t=r.length,e=void 0,n=void 0;--t>0;)e=Math.floor(Math.random()*(t+1)),n=r[e],r[e]=r[t],r[t]=n;return r},first:function(r){return r[0]},append:function(r,t){return r?(r.push(t),r):[t]},prepend:function(r,t){return r?(r.unshift(t),r):[t]},last:function(r){return r[r.length-1]},unique:function(r){return Array.from(new Set(r))},random:function(r){return r[Math.floor(Math.random()*r.length)]},inRange:function(r,t){return Math.min(Math.max(t,0),r.length-1)}},Object.getOwnPropertyNames(Array.prototype).filter(function(r){return"function"==typeof Array.prototype[r]}).forEach(function(t){var e=Array.prototype[t];r.exports[t]=function(){var r=arguments;return function(t){return e.apply(t,r)}}}),r.exports}),$s_(7,[],function(){var r={exports:{}};r.exports;return r.exports={CASE_SIZE:8,SIZE:100,DIR:{up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}}},r.exports}),$s_(1,[7,8],function(r,t){var e={exports:{}},n=(e.exports,r.SIZE),o=r.CASE_SIZE,u=t,i=Object.create(null),a=void 0,c=void 0;u.style({height:o+"px",width:o+"px"});Object.assign(document.body.style,{margin:0,background:"darkgrey"});var s=function(r,t){return"translate("+~~(r*o)+"px, "+~~(t*o)+"px)"},f=[],l=function(r){return(" #"+r).slice(-3)},p=function(r){return(r+"      ").slice(0,8)},d=function(r,t,e){return l(t.length-(e-(r+1)))},y=function(r){return r.alpha<=1},x=function(r){return r.alpha+=.0075},h=function(){f=f.filter(y),f.forEach(x)};return e.exports={init:function(r,t,e){return c=PIXI.autoDetectRenderer(o*n,o*n),a=new PIXI.Container,u.replaceContent(document.body,u.div.style({display:"flex",flexWrap:"wrap",position:"relative",margin:"0 auto",width:o*n+"px"},e.map(function(r){var t=r.name,e=r.x,n=r.y,o=r.color;return i[t]=u.div.style({position:"absolute",left:0,top:0,transform:s(e,n),transition:"transform 0.1s",whiteSpace:"pre",color:"#"+("00000"+o.toString(16)).slice(-6),opacity:1,background:"rgba(0, 0, 0, 0.5)",fontFamily:"monospace",textShadow:["-1px -1px black","-1px 1px black","1px -1px black","1px 1px black"].join(", m")},t)}).concat([c.view]))),c.render(a),r},setScore:function(r){return r.filter(function(r){return r.dead}).sort(function(r,t){return t.score===r.score?r.name-t.name:t.score-r.score}).forEach(function(t,e,n){var o=t.name,u=(t.x,t.y,t.cause,t.score),a=n.length,c=i[o];c.textContent=d(e,r,a)+" - "+p(o)+" ("+u+")",c.style.transition="transform 0.5s ease-in, opacity 5s ease-out",c.style.transform=s(0,2*e)})},update:function(r){r.forEach(function(r){var t=r.name,e=r.x,n=r.y,u=r.color,c=r.dead,l=new PIXI.Graphics;l.beginFill(u),l.alpha=.3,l.drawRect(e*o,n*o,o,o),l.endFill(),a.addChild(l),f.push(l),c||(i[t].style.transform=s(e,n))}),h(),c.render(a)},end:function(){setInterval(function(){h(),c.render(a)},16)}},e.exports}),$s_(5,[9],function(r){var t={exports:{}},e=(t.exports,r),n=function(r,t,n,o){var u=e(function(t,e){return t&&e[r].indexOf(t)===-1&&t}),i=function(r){return u(document.body.getElementsByTagName(t),r)},a=function(r,t){return function(e){var n=new Error("Error loading "+o+" "+r);n.event=e,t(n)}};return function(e){if(!i(e))return Promise.reject(new Error(o+" "+e+" already injected"));var u=document.createElement(t),c=new Promise(function(r,t){u.onerror=a(e,t),u.onload=r});return u[n]=o,u[r]=e,document.body.appendChild(u),c}};return t.exports={css:n("href","link","rel","stylesheet"),js:n("src","script","type","text/javascript")},t.exports}),$s_(6,[10],function(r){var t={exports:{}},e=(t.exports,r),n={seed:Math.random(),users:["cdenis","ycribier","xpetit"]},o=e(),u=t.exports={seed:o.seed?Number(o.seed):n.seed,users:o.users?o.users.split(","):n.users};return window.location.hash="?seed="+u.seed+"&users="+u.users.join(),t.exports}),$s_(10,[9],function(r){var t={exports:{}},e=(t.exports,r),n=e(function(r,t){var e=t.replace(/\+/g," "),n=e.indexOf("="),o=decodeURIComponent(e.slice(0,n)),u=decodeURIComponent(e.slice(n+1));return void 0===r[o]?r[o]=u:Array.isArray(r[o])?r[o].push(u):r[o]=[r[o],u],r});return t.exports=function(r){return r||(r=(location.hash||location.search||"").split("?")[1]),r&&"string"==typeof r?n(r.split("&"),Object.create(null)):{}},t.exports}),$s_(8,[11,12],function(r,t){var e={exports:{}},n=(e.exports,r),o=t;return n.forEach(function(r){return void 0===o[r]&&(o[r]=o(r))}),e.exports=o,e.exports}),$s_(9,[13,14],function(r,t){var e={exports:{}},n=(e.exports,r),o=t.isFn;return e.exports=n.magic("accumulator"),e.exports.from=function(r,t){return o(t)?function(e){return reduce(r,e,t())}:function(e){return reduce(r,e,t)}},e.exports}),$s_(11,[],function(){var r={exports:{}};r.exports;return r.exports=Object.getOwnPropertyNames(window).filter(function(r){return/HTML[A-Z][a-z]+Element/.test(r)}).map(function(r){return r.slice(4,-7).toLowerCase()}).concat("a,abbr,address,article,aside,b,bdi,bdo,blockquote,br,caption,cite,code,col,colgroup,d,data,datalist,dd,del,dfn,dl,dt,element,em,fieldset,figcaption,figure,footer,g,h1,h2,h3,h4,h5,h6,header,hgroup,hr,i,img,ins,ist-style-typ,kbd,li,main,mark,menuitem,nav,noscript,ol,optgroup,p,path,q,rb,rect,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,summary,sup,svg,tbody,td,textarea,tfoot,th,thead,time,tr,u,ul,use,var,wbr".split(",")),r.exports}),$s_(14,[],function(){var r={exports:{}},t=(r.exports,function(r){return"function"==typeof r}),e=Array.isArray||function(r){return r&&r.constructor===Array},n=function(r){return void 0!==r},o=function(r){return"number"==typeof r&&!isNaN(r)},u=function(r){return r===!0||r===!1},i=function(r){return r&&"object"===(void 0===r?"undefined":_typeof(r))},a=function(r){return"string"==typeof r},c=function(r){return void 0===r},s=function(r){return r&&t(r.then)},f=function(r){return s(r)&&t(r.catch)},l=function(r){return r instanceof Element},p=function(r){return a(r)||e(r)||l(r)},d=function(r){return t(r)&&t(r.set)},y=function(r){return t(r.listen)&&t(r.broadcast)},x=function(r){switch(void 0===r?"undefined":_typeof(r)){case"string":case"number":case"boolean":return!0;default:return!1}},h="undefined"!=typeof window,v=function(r){return o(r)&&Math.floor(r)!==r},m=Number.isInteger||function(r){return o(r)&&Math.floor(r)===r},g={isFn:t,isArr:e,isDef:n,isInt:m,isStr:a,isObj:i,isNum:o,isBool:u,isNode:h,isUndef:c,isFloat:v,isEvent:y,isObserv:d,isPromise:f,isElement:l,isChildren:p,isPrimitive:x,isThenable:s};return Object.keys(g).forEach(function(r){return g[r.slice(2).toLowerCase()]=g[r]}),r.exports=g,r.exports}),$s_(12,[14,15,16,17],function(r,t,e,n){var o={exports:{}},u=(o.exports,t),i=e,a=r.isStr,c=r.isChildren,s=r.isDef,f=n,l=function r(t,e){if(void 0!==e)return e instanceof Element?t.appendChild(e):Array.isArray(e)?e.forEach(function(e){return r(t,e)}):t.appendChild(document.createTextNode(String(e)))},p=function r(t,e){if(!e)return t;for(var n=Object.keys(e),o=-1;++o<n.length;)t[n[o]]&&"object"===_typeof(t[n[o]])?r(t[n[o]],e[n[o]]):t[n[o]]=e[n[o]];return t},d=function(r,t,e){return r.setAttribute(e,t)},y=function(r,t,e){return r[e]=t},x=function(r,t,e){return Object.assign(r[e],t)},h=function(r,t){return r.classList.add.apply(r.classList,t.split(" "))},v=function(r){switch(r){case"class":case"className":return h;case"dataset":case"style":return x;default:return r.indexOf("-")!==-1?d:y}},m=function(r,t,e){c(t)&&(e=t,t=void 0);var n=document.createElement(r.tag);if(t||r.props){var o=u(function(r,t){return s(r)&&v(t)(n,r,t)});r.props&&o(r.props),t&&o(t)}return l(n,e),n},g=function(r,t){return a(r)?(t||(t={}),r=f(r,t).toLowerCase()):(t=r,r="div"),Object.keys(t).length||(t=void 0),{tag:r,props:t}},b=function(r,t){return a(r)?g(r,{style:t.style||t}):g("div",{style:r.style||r})},j=function(r,t){return k(p(r,r))},k=function(r){var t=function(t,e){return m(r,t,e)};return t.style=function(t,e){return m(r,{style:t},e)},t.extend=function(t,e){return j(r,Array.isArray(t)?t.reduce(p):g(t,e))},t.extend.style=function(t,e){return j(r,Array.isArray(t)?t.reduce(p):b(t,e))},t},w=function(r,t){return k(g(r,t))};w.style=function(r,t){return k(b(r,t))},w.appendChild=i(l);var _=w.empty=function(r){if(r)for(;r.lastChild&&r.lastChild!==r;)r.removeChild(r.lastChild)};return w.replaceContent=i(function(r,t){_(r),l(r,t)}),w.getHandler=v,o.exports=w,o.exports}),$s_(13,[14,18],function(r,t){var e={exports:{}},n=(e.exports,r.isInt),o=(r.isFn,r.isObj,r.isStr,t),u=function(r,t,e,o){return e?n(e.length)?r.arr(t,e,o):r.obj(t,e,o):e},i=function(r){return function(){var t=arguments;switch(arguments.length){case 1:return function(){return r(t[0])};case 2:return r(arguments[0],arguments[1]);case 3:return r(arguments[0],arguments[1],arguments[2])}}},a=function(r){var t=function(){var t=arguments;switch(arguments.length){case 1:return function(e,n){return u(r,t[0],e,n)};case 2:return u(r,arguments[0],arguments[1]);case 3:return u(r,arguments[0],arguments[1],arguments[2])}};return t.arr=i(r.arr),t.obj=i(r.obj),t};a.magic=function(r,t){return a({obj:o("obj",r,t),arr:o("arr",r,t)})};var c=a.magic({args:["src","collection"],pre:"//",post:"\nif (src[key] !== collection[key]) return false",nok:!0});return a.eql=c,a.currify=i,e.exports=a,e.exports}),$s_(15,[13],function(r){var t={exports:{}},e=(t.exports,r);return t.exports=e.magic(),t.exports}),$s_(16,[],function(){var r={exports:{}},t=(r.exports,function(r,t){var e=r.length,n=e+t.length;if(e===n)return r;var o=Object.create(null);o.length=n;for(var u=-1;++u<e;)o[u]=r[u];for(;u<n;)o[u]=t[u-e],++u;return o});return r.exports=function(r,e){function n(o){return o.length<e?function(){return n(t(o,arguments))}:r.apply(null,o)}return e||(e=r.length),function(){return n(arguments)}},r.exports.mergeArgs=t,r.exports}),$s_(18,[14],function(r){var t={exports:{}},e=(t.exports,r),n={obj:"Object.create(null)",arr:"Array(max)"},o={obj:"collection[keys[++i]]",arr:"collection[++key]"},u={obj:"++i < max",arr:"++key < max"},i={obj:"key = keys[i]",arr:""},a={obj:["var keys = Object.keys(collection)","var max = keys.length","var i = -1, key\n"].join(";"),arr:["var max = collection.length","var key = -1"].join(";")};return t.exports=function(r,t,c){e.obj(t)?(c=t,c.acc?t="accumulator":t.result&&(t="result")):c||(c={});var s=e.arr(c.args)?c.args:["fn","collection"],f=a[r],l="",p=e.def(c.nok)?c.nok:"collection",d=(i[r],c.post||""),y=c.pre||"";switch(t){case"accumulator":s.push("acc"),l+="acc, ",f+=";acc || (acc = "+(c.acc||o[r])+")",y||(y="acc = "),p="acc";break;case"result":f+=";var result = "+(c.result||n[r]),y||(y="result[key] = "),p="result";break;default:var x=!!e.def(c.test)&&c.test;if(Boolean(x)){y||(y=x?"if (":"if (!"),d||(d=") return "+(e.def(c.ok)?c.ok:p));break}y||(y="if ("),d||(d="=== "+x+") return "+(e.def(c.ok)?c.ok:p))}return Function(s,[f+";","while ("+u[r]+") {","  "+i[r],"  "+y+"fn("+l+"collection[key], key, collection)"+d,"} return "+p].join("\n"))},t.exports}),$s_(17,[19],function(r){var t={exports:{}},e=(t.exports,r),n=e(/^\.|#/);return t.exports=function(r,t){if(!r)return"div";var e=r.split(/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/),o=void 0;n(e[1])&&(o="div");var u=void 0,i=void 0,a=void 0,c=void 0;for(c=0;c<e.length;c++)(i=e[c])&&(a=i[0],o?"."===a?(u||(u=[])).push(i.slice(1)):"#"===a&&(t.id||(t.id=i.slice(1))):o=i);return u&&(t.className&&u.push(t.className),t.className=u.join(" ")),t.namespace,o},t.exports}),$s_(19,[],function(){var r={exports:{}};r.exports;return r.exports=function(r){return r.test.bind(r)},r.exports}),$_[0];</script>
  </html>